services:
  emailarchive:
    build: .
    environment:
      NODE_ENV: production
      PORT: "3001"

      # Frontend
      FRONTEND_URL: https://emailarchive.michaelroy.ca

      # Authentication
      JWT_SECRET: ${JWT_SECRET}

      # Gmail OAuth
      GMAIL_CLIENT_ID: ${GMAIL_CLIENT_ID}
      GMAIL_CLIENT_SECRET: ${GMAIL_CLIENT_SECRET}
      GMAIL_REDIRECT_URI: https://emailarchive.michaelroy.ca/api/auth/gmail/callback

      # OpenAI
      OPENAI_API_KEY: ${OPENAI_API_KEY}

    volumes:
      - emailarchive_storage:/app/backend/storage

    ports:
      - "3001:3001"

volumes:
  emailarchive_storage:
